<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.3.dev1+g448bf07" />
<title>cap.convert API documentation</title>
<meta name="description" content="The convert module …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>cap.convert</code></h1>
</header>
<section id="section-intro">
<p>The convert module.</p>
<p>Module for converting the input data, consisting of words with time stamps and
POS-tags, to caption groups.
The error between the created output and the
manual-subtitles can also be measured by basic_error.</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="cap.convert.basic_error"><code class="name flex">
<span>def <span class="ident">basic_error</span></span>(<span>input_subs: List[srt.Subtitle], manual_subs: List[srt.Subtitle], max_width: int = 42) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Takes the generated subtitles and the manual subtitles and compares
them. A caption group is considered to be correct if the last word of the
caption group and the first word of the next are the same as in the manual
subtitles. When max_width is exceeded we penalise the captiongroup. In the
end this function is intended to be maximalised.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>input_subs</code></strong></dt>
<dd>The generated subtitles as a srt parsed list.</dd>
<dt><strong><code>manual_subs</code></strong></dt>
<dd>The man-made subtitles we considered to correct.</dd>
<dt><strong><code>max_width</code></strong></dt>
<dd>How long a caption is allowed to be, default 42, 0 means no
restrictions.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Amount of correctly created caption groups, and amount of times
max_width was exceeded.</p></div>
</dd>
<dt id="cap.convert.check_cps"><code class="name flex">
<span>def <span class="ident">check_cps</span></span>(<span>data: List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]], max_cps: float = 15, deviation: float = 1.5) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if the caption group follows the rule of around 15 characters per
second.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>data</code></strong></dt>
<dd>Caption group according to our custom Caption-list datastructure.</dd>
<dt><strong><code>max_cps</code></strong></dt>
<dd>Indicates the optimal characters per second, which is 15.</dd>
<dt><strong><code>deviation</code></strong></dt>
<dd>Indicates how much it can deviate from the optimal 15
characters per second.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>1 if the characters per second is too high.
0 if the characters per second is just right.
-1 if the characters per second is too low.</p></div>
</dd>
<dt id="cap.convert.cps"><code class="name flex">
<span>def <span class="ident">cps</span></span>(<span>data: List[List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]]], threshold: float = 0.75) ‑> List[List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]]]</span>
</code></dt>
<dd>
<div class="desc"><p>Adjusts the time of the caption group so the subtitles stay shorter or
longer on the screen. It adjusts it according to the 15 characters per
second limit.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>data</code></strong></dt>
<dd>Caption group according to our custom Caption-list datastructure.</dd>
<dt><strong><code>threshold</code></strong></dt>
<dd>Indicates the maximum time difference.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>The data with changed a changed start time for the first word of the
caption group and a changed end time for the last word of the caption
group</p></div>
</dd>
<dt id="cap.convert.create_groups"><code class="name flex">
<span>def <span class="ident">create_groups</span></span>(<span>subs: List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]]) ‑> List[List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]]]</span>
</code></dt>
<dd>
<div class="desc"><p>Function that first adds the weights to the words in the caption-list and
then uses the split_weight function to create caption groups. Adding
weight is done by using the functions for adding weight in weighting.py.
They are listed in order of importance. Now that the words have weights,
the function split_weight can be used to create the caption groups.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>subs</code></strong></dt>
<dd>Input data without weighting.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>List that contains the caption groups.</p></div>
</dd>
<dt id="cap.convert.split_weights"><code class="name flex">
<span>def <span class="ident">split_weights</span></span>(<span>subs: List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]], result: List[List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]]] = [], char_limit: int = 81, char_limit_div: int = 5) ‑> List[List[Union[<a title="cap.asr.Word" href="asr.html#cap.asr.Word">Word</a>, <a title="cap.asr.Punc" href="asr.html#cap.asr.Punc">Punc</a>]]]</span>
</code></dt>
<dd>
<div class="desc"><p>Function that splits the input data based on the highest weights.
Recursively go trough the input data and split at the word after the
highest weight. For every caption group created is checked if the caption
group doesn't exceed the maximum characters. If it doesn't exceed the
maximum characters, append the caption group to the result list.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>subs</code></strong></dt>
<dd>The caption-list with added weights.</dd>
<dt><strong><code>result</code></strong></dt>
<dd>Empty list for the caption groups.</dd>
<dt><strong><code>char_limit</code></strong></dt>
<dd>Maximal number of characters for one caption group, which is
standard 81.</dd>
<dt><strong><code>char_limit_div</code></strong></dt>
<dd>The diviation of the maximal characters in a caption
group.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>List that contains the caption groups.</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="cap" href="index.html">cap</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="cap.convert.basic_error" href="#cap.convert.basic_error">basic_error</a></code></li>
<li><code><a title="cap.convert.check_cps" href="#cap.convert.check_cps">check_cps</a></code></li>
<li><code><a title="cap.convert.cps" href="#cap.convert.cps">cps</a></code></li>
<li><code><a title="cap.convert.create_groups" href="#cap.convert.create_groups">create_groups</a></code></li>
<li><code><a title="cap.convert.split_weights" href="#cap.convert.split_weights">split_weights</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.3.dev1+g448bf07</a>.</p>
</footer>
</body>
</html>